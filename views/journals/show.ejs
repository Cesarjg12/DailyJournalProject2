<%- include('../partials/header') %>

<h2><%= journal.title %></h2>

<div>
  <h3>Morning</h3>
  <p><%= journal.morningEntry %></p>
</div>

<div>
  <h3>Noon</h3>
  <p><%= journal.noonEntry %></p>
</div>

<div>
  <h3>Evening</h3>
  <p><%= journal.eveningEntry %></p>
</div>

<h3>Comments</h3>
<% if (journal.comments.length === 0) { %>
  <p>No comments yet</p>
<% } else { %>
  <ul>
    <% journal.comments.forEach(function(comment) { %>
      <li>
        <img alt="avatar" src="<%= comment.userAvatar %>" referrerpolicy="no-referrer">
        <p><strong>User: </strong><%= comment.userName %></p>
        <p><strong>Date: </strong><%= comment.createdAt.toDateString() %></p>
        <p><strong>Comment: </strong><%= comment.content %></p>
      </li>
    <% }) %>
  </ul>
<% } %>

<h3>Add Comment</h3>
<form action="/journals/<%= journal._id %>/comments" method="POST">
  <div>
    <label for="commentContent">Content:</label>
    <textarea id="commentContent" name="content" rows="3" required></textarea>
  </div>
  <button type="submit">Add Comment</button>
</form>

<div>
  <a href="/journals/<%= journal._id %>/edit">Edit Journal</a>
  <form action="/journals/<%= journal._id %>?_method=DELETE" method="POST">
    <button type="submit">Delete Journal</button>
  </form>
</div>

<%- include('../partials/footer') %>